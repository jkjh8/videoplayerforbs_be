"use strict";(self["webpackChunkvideoplayerforbs"]=self["webpackChunkvideoplayerforbs"]||[]).push([[970],{3943:(e,a,l)=>{l.r(a),l.d(a,{default:()=>M});var t=l(9835),o=l(499),n=l(6970),i=l(1957),r=l(9302),s=(l(4376),l(321),l(1569)),d=l(8269);const u=(0,o.iH)([]);async function c(){u.value=[];const e=await s.api.get("/playlist"),a=e.data.playlist;for(let l=0;l<a.length;l++)u.value.push({...a[l]});console.log(u.value),d.socket.emit("command",{command:"update_playlist",playlist:u.value})}function p(e){d.socket.emit("command",{command:"update_playlist",playlist:e})}var m=l(3910),f=l(7071),w=(l(1338),l(2308)),y=(l(6134),l(3130)),v=l.n(y),g=(l(417),l(5364)),_=l(8957);const h={class:"row no-wrap justify-between items-center"},k={class:"row no-wrap"},W={class:"row justify-center q-pt-md"},b=["href"],x={class:"row no-wrap"},Z={name:"PlaylistPage",setup(e){const{notifyWarn:a,notifyError:l}=(0,_.Z)(),d=(0,r.Z)();function y(){d.dialog({component:w.Z,componentProps:{selection:"multiple"}}).onOk((async e=>{d.loading.show();try{for(let a=0;a<e.length;a++)u.value.push({...e[a],index:u.value.length});await s.api.put("/playlist",{playlist:u.value}),p(u.value),await c(),d.loading.hide()}catch(a){d.loading.hide(),console.error(a)}}))}function Z(e){for(let a=0;a<u.value.length;a++)if(e===u.value[a])return u.value.splice(a,1),q()}async function q(){u.value.forEach(((e,a)=>{e.index=a})),await s.api.put("/playlist",{playlist:u.value}),p(u.value),await c()}return(0,t.bv)((async()=>{m.IO.value=!0,d.loading.show(),await c(),d.loading.hide()})),(e,a)=>{const l=(0,t.up)("q-btn"),r=(0,t.up)("q-separator"),s=(0,t.up)("q-badge"),d=(0,t.up)("q-avatar"),p=(0,t.up)("q-item-section"),w=(0,t.up)("q-item-label"),_=(0,t.up)("q-item"),C=(0,t.up)("q-card-section"),Q=(0,t.up)("q-card"),S=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(S,null,{default:(0,t.w5)((()=>[(0,t._)("div",h,[(0,t.Wm)(f.Z,{class:"animate__pulse",name:"플레이 리스트",caption:"플레이 리스트 관리",icon:"svguse:icons.svg#listColor"}),(0,t._)("div",k,[(0,t.Wm)(l,{round:"",flat:"",color:"primary",icon:"play_arrow",onClick:a[0]||(a[0]=e=>(0,o.SU)(m.gh)(0))},{default:(0,t.w5)((()=>[(0,t.Wm)(g.Z,{msg:"플레이 리스트 재생"})])),_:1}),(0,t.Wm)(r,{class:"q-mx-sm",vertical:""}),(0,t.Wm)(l,{round:"",flat:"",color:"primary",icon:"add_circle",onClick:y},{default:(0,t.w5)((()=>[(0,t.Wm)(g.Z,{msg:"파일 추가"})])),_:1}),(0,t.Wm)(l,{round:"",flat:"",color:"yellow-10",icon:"refresh",onClick:(0,o.SU)(c)},{default:(0,t.w5)((()=>[(0,t.Wm)(g.Z,{msg:"새로고침"})])),_:1},8,["onClick"])])]),(0,t._)("div",W,[(0,t.Wm)(Q,{style:{"min-width":"500px"},flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{class:"q-pa-none"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,o.SU)(v()),{modelValue:(0,o.SU)(u),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,o.dq)(u)?u.value=e:null),"item-key":"index",onEnd:q},{item:(0,t.w5)((({element:e})=>[(0,t.Wm)(_,{style:(0,n.j5)([{border:"0.5px solid #efefef","border-radius":"4px",margin:"1rem",padding:"0.5rem"},(0,o.SU)(m.QL).file&&(0,o.SU)(m.QL).file.index===e.index?"border: 0.5px solid #aaaaaa;":"border: 0.5px solid #efefef;"]),class:(0,n.C_)((0,o.SU)(m.QL).file&&(0,o.SU)(m.QL).file.index===e.index?"bg-blue-grey-2":""),clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{round:"",color:"primary","text-color":"white",size:"sm"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.index+1)+" ",1),e.exist?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(s,{key:0,floating:"",color:"red",rounded:""}))])),_:2},1024)])),_:2},1024),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.name),1)])),_:2},1024),(0,t.Wm)(w,{caption:""},{default:(0,t.w5)((()=>[(0,t._)("a",{href:e.address,target:"_blank"},(0,n.zw)(e.address),9,b)])),_:2},1024)])),_:2},1024),(0,t.Wm)(p,{side:""},{default:(0,t.w5)((()=>[(0,t._)("div",x,[(0,t.Wm)(l,{round:"",flat:"",icon:"play_arrow",size:"sm",color:"primary",onClick:(0,i.iM)((a=>(0,o.SU)(m.gh)(e.index)),["prevent","stop"])},null,8,["onClick"]),(0,t.Wm)(l,{round:"",flat:"",icon:"delete",size:"sm",color:"red-10",onClick:(0,i.iM)((a=>Z(e)),["prevent","stop"])},null,8,["onClick"])])])),_:2},1024)])),_:2},1032,["style","class"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])])),_:1})}}};var q=l(9885),C=l(4455),Q=l(926),S=l(4458),U=l(3190),z=l(490),j=l(1233),L=l(1357),I=l(990),P=l(3115),E=l(9984),V=l.n(E);const B=Z,M=B;V()(Z,"components",{QPage:q.Z,QBtn:C.Z,QSeparator:Q.Z,QCard:S.Z,QCardSection:U.Z,QItem:z.Z,QItemSection:j.Z,QAvatar:L.Z,QBadge:I.Z,QItemLabel:P.Z})}}]);